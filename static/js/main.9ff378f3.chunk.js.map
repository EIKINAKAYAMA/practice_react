{"version":3,"sources":["index.js"],"names":["Square","props","className","onClick","value","Board","i","this","squares","board","row","j","num","push","renderSquare","React","Component","Game","toggleClick","selected","state","histories","findIndex","history","isToggleOn","jumpTo","length","setState","sort","a","b","Array","fill","point","step","slice","calculateWinner","forEach","concat","map","index","console","log","order","style","fontWeight","currentIndex","current","winner","status","moves","listCreate","handleClick","Math","floor","lines","c","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9ff378f3.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport './index.css';\n\nfunction Square(props) {\n  return (\n    <button className=\"square\" onClick={props.onClick}>\n      {props.value}\n    </button>\n  );\n}\n\nclass Board extends React.Component {\n\n  renderSquare(i) {\n    return <Square key={`b${i}`} value={this.props.squares[i]} onClick ={() => this.props.onClick(i)}/>;\n  }\n\n  // パラダイムについて考える\n  render() {\n    const board = [];\n\n    for(let i=0; i < 4; i++){\n      const row = [];\n      for(let j = 0; j < 4; j++){\n        const num = i * 4 + j;\n        row.push(this.renderSquare(num));\n      }\n      board.push(<div key={`a${i}`} className=\"board-row\">{row}</div>)\n    }\n\n    return (\n      <div>\n        { board }\n      </div>\n    );\n  }\n}\n\nclass Game extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      histories:[{\n        squares: Array(16).fill(null),\n        point: -1,\n      }],\n      step: 0,\n      isToggleOn: true,\n    }\n  }\n\n  handleClick(i) {\n    const histories = (this.state.step !== this.state.histories.length - 1)\n      ? (this.state.isToggleOn \n        ? this.state.histories.slice(0, this.state.step + 1)\n        : this.state.histories.slice(-(this.state.step + 1), this.state.histories.length))\n      :this.state.histories.slice(0)\n    \n    const history = {\n      squares: this.state.isToggleOn ? histories[histories.length - 1].squares.slice(0) : histories[0].squares.slice(0),\n      point: i,\n      selected: false,\n    }\n\n    // 勝利判定、勝利の場合はXかOが返却、判定負荷の場合はNULLが返却\n    if (calculateWinner(history.squares) || history.squares[i]) {\n      return;\n    }\n\n    histories.forEach(history => history.selected = false)\n    history.squares[i] = histories.length % 2 === 0 ? 'O' : 'X';\n\n    this.setState({\n      histories: this.state.isToggleOn ? histories.concat([history]) : [history].concat(histories),\n      step: histories.length,\n    })    \n  }\n\n  toggleClick = () => {\n    const selected = this.state.histories.findIndex(history => history.selected === true); //既に選択されている配列があれば取得\n\n    if(selected !== -1){\n      this.state.isToggleOn \n      ? this.jumpTo(selected)\n      : this.jumpTo(this.state.histories.length -1 - selected)\n    }\n\n    this.setState({\n      histories: this.state.histories.sort((a, b) => { \n        return a > b? 1:-1\n      }),\n      isToggleOn: !this.state.isToggleOn\n    })\n\n  }\n\n  jumpTo(step){\n    const histories = this.state.histories.map((history, index) => {\n      history.selected = this.state.isToggleOn \n        ? index === step\n        : index === this.state.histories.length - 1 - step\n      return history;\n    })\n\n    this.setState({\n      histories: histories,\n      step: step,\n    })\n  }\n\n  listCreate(history, index){\n    console.log(history, index)\n   const order = index ? `Go to index # ${index}` : 'Go to game start'\n   return (\n    <li key={index}>\n      <button  onClick={() => {\n        this.jumpTo(index);\n      }} style = {history.selected ? {fontWeight: 'bold'} : { fontWeight: 'normal'}} >{order}</button>\n    </li>\n   )\n  }\n\n  render() {\n    const histories = this.state.histories;\n    const currentIndex = histories.findIndex(history => history.selected === true)\n    const current = currentIndex !== -1 \n      ? (histories[currentIndex]) //履歴選択がある場合は、選択したものがCurrent\n      : (this.state.isToggleOn ? histories[histories.length - 1] : histories[0]) //履歴選択がない場合は、 昇降順に応じた最新歴がCurrent\n\n    const winner = calculateWinner(current.squares);\n    const status = winner ? \"Winner: \" + winner : \"Next player: \" + (this.state.step % 2 === 0 ? \"X\" : \"O\");\n\n    const moves = histories.map((history, index) =>{ \n      return (this.listCreate(history, this.state.isToggleOn? index : (histories.length - 1) - index))\n    })\n    \n    return (\n      <div className=\"game\">\n        <div className=\"game-board\">\n          <Board \n            squares={\n              this.state.isToggleOn \n                ?this.state.histories[this.state.step].squares\n                : this.state.histories[(this.state.histories.length - 1)- this.state.step].squares}\n            onClick={(i) => this.handleClick(i)}\n          />\n        </div>\n        <div className=\"game-info\">\n          <div>\n            { status }\n            { current.point !== -1 ? <p>Coordinate: (col:{current.point % 4 + 1}, row:{Math.floor(current.point/4 + 1)}, player: { this.state.step % 2 === 0 ? 'O' : 'X' })</p>\n              : <p>Let's play</p>}\n          </div>\n          <ol>{moves}</ol>\n          <button onClick={this.toggleClick}>\n            {this.state.isToggleOn ? '降順' : '昇順'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\n// ========================================\n\nReactDOM.render(\n  <Game />,\n  document.getElementById('root')\n);\n\nfunction calculateWinner(squares) {\n  const lines = [\n    [0, 1, 2],\n    [1, 2, 3],\n    [4, 5, 6],\n    [5, 6, 7],\n    [8, 9, 10],\n    [9, 10, 11],\n    [12, 13, 14],\n    [13, 14, 15],\n    [0, 4, 8],\n    [4, 8, 12],\n    [1, 5, 9],\n    [5, 9, 13],\n    [2, 6, 10],\n    [6, 10, 14],\n    [3, 7, 11],\n    [7, 11, 15],\n    [0, 5, 10],\n    [5, 10, 15],\n    [4, 9, 14],\n    [1, 6, 11],\n    [3, 6, 9],\n    [6, 9, 12],\n    [2, 5, 8],\n    [7, 10, 13],\n  ];\n\n  for (let i = 0; i < lines.length; i++) {\n    const [a, b, c] = lines[i];\n    //squares[a],squares[b],squares[c]がすべて同じ値であれば、squares[a]を返す\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\n      return squares[a];\n    }\n  }\n  return null;\n}"],"sourceRoot":""}